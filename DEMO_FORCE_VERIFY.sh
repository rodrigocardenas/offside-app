#!/bin/bash

# Demo: Force Verify Questions Command

echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘  DEMO: app:force-verify-questions Command                     â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

echo "ğŸ“Œ Ejemplo 1: Ver ayuda del comando"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "$ php artisan app:force-verify-questions --help"
echo ""

echo "ğŸ“Œ Ejemplo 2: Verificar preguntas pendientes (dry-run)"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "$ php artisan app:force-verify-questions --dry-run --days=30"
echo ""
echo "Resultado:"
echo "  ğŸ“– USAGE:"
echo "    php artisan app:force-verify-questions [OPTIONS]"
echo ""
echo "  ğŸ“‹ OPTIONS:"
echo "    --days=N       NÃºmero de dÃ­as hacia atrÃ¡s (default: 30)"
echo "    --limit=N      MÃ¡ximo de matches a verificar (default: 100)"
echo "    --match-id=ID  ID especÃ­fico del match (omite otros filtros)"
echo "    --re-verify    Re-verificar preguntas ya verificadas"
echo "    --dry-run      Solo previsualizar sin ejecutar"
echo ""
echo "  âŒ No matches found con criterios especificados"
echo "     (Esto es correcto - todas las preguntas ya fueron verificadas)"
echo ""

echo "ğŸ“Œ Ejemplo 3: Re-verificar preguntas (dry-run)"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "$ php artisan app:force-verify-questions --re-verify --dry-run --days=30"
echo ""
echo "Resultado:"
echo "  ğŸ” FORCE VERIFY QUESTIONS"
echo "  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "  Days back: 30"
echo "  Limit: 100"
echo "  Match ID: ANY"
echo "  Re-verify: YES (AsignarÃ¡ puntos nuevamente)"
echo "  Dry Run: YES"
echo "  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "  Buscando matches desde: 2026-01-03 18:36"
echo ""
echo "  âœ… Encontrados 13 matches para RE-VERIFICAR:"
echo ""
echo "    Match #290"
echo "      â€¢ Deportivo La Coruna vs Atletico Madrid (3-2)"
echo "      â€¢ Fecha: 2026-01-31 20:00"
echo "      â€¢ Status: Finished"
echo "      â€¢ Preguntas: 6 para re-verificar"
echo ""
echo "    Match #291"
echo "      â€¢ Real Sociedad vs Osasuna (2-1)"
echo "      â€¢ Fecha: 2026-01-30 19:00"
echo "      â€¢ Status: Finished"
echo "      â€¢ Preguntas: 3 para re-verificar"
echo ""
echo "    ... y 11 matches mÃ¡s"
echo ""
echo "  âš ï¸  DRY RUN MODE: No se ejecutarÃ¡ la verificaciÃ³n"
echo ""
echo "  â„¹ï¸  Para ejecutar realmente, corre sin --dry-run"
echo "  php artisan app:force-verify-questions --re-verify --days=30"
echo ""

echo "ğŸ“Œ Ejemplo 4: Ejecutar re-verificaciÃ³n REAL"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "$ php artisan app:force-verify-questions --re-verify --days=30"
echo ""
echo "Resultado:"
echo "  ... (mismo output que arriba pero sin \"DRY RUN MODE\")"
echo ""
echo "  ğŸ”„ Reseteando result_verified_at para re-verificaciÃ³n..."
echo ""
echo "  ğŸš€ DISPATCHING VERIFICATION BATCH"
echo "  Batch ID: 8a4e9c2f-3e1d-4b9a-8f5c-1a2b3c4d5e6f"
echo "  Matches: 13"
echo ""
echo "  âœ… Verification batch dispatched successfully"
echo "  ğŸ“Š Queue will process: BatchGetScoresJob â†’ BatchExtractEventsJob â†’ VerifyAllQuestionsJob"
echo ""
echo "  âœ¨ VerificaciÃ³n en proceso. Revisa los logs con:"
echo "     tail -f storage/logs/laravel.log | grep 8a4e9c2f"
echo ""

echo "ğŸ“Œ Ejemplo 5: Re-verificar un match especÃ­fico"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "$ php artisan app:force-verify-questions --match-id=445 --re-verify --dry-run"
echo ""
echo "Resultado:"
echo "  ğŸ” FORCE VERIFY QUESTIONS"
echo "  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "  Days back: 30"
echo "  Limit: 100"
echo "  Match ID: 445"
echo "  Re-verify: YES (AsignarÃ¡ puntos nuevamente)"
echo "  Dry Run: YES"
echo "  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "  Buscando match especÃ­fico: #445"
echo ""
echo "  âœ… Encontrados 1 matches para RE-VERIFICAR:"
echo ""
echo "    Match #445"
echo "      â€¢ Real Madrid vs Monaco (6-1)"
echo "      â€¢ Fecha: 2026-01-31 20:00"
echo "      â€¢ Status: Finished"
echo "      â€¢ Preguntas: 5 para re-verificar"
echo ""
echo "  âš ï¸  DRY RUN MODE: No se ejecutarÃ¡ la verificaciÃ³n"
echo ""

echo ""
echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘  NOTAS IMPORTANTES                                             â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "âš ï¸  Re-verify limpia puntos previamente asignados"
echo "    Los usuarios perderÃ¡n/recibirÃ¡n puntos basado en la nueva verificaciÃ³n"
echo ""
echo "âš¡ El queue worker debe estar corriendo:"
echo "   php artisan queue:work"
echo ""
echo "ğŸ“Š Monitorea el progreso:"
echo "   tail -f storage/logs/laravel.log | grep VerifyAllQuestionsJob"
echo ""
echo "ğŸ“– Para mÃ¡s detalles, ver: FORCE_VERIFY_GUIDE.md"
echo ""
